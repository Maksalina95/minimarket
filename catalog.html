<h2 class="page-title">Выберите категорию</h2>
<div id="categoryList" class="product-list"></div>

<script src="scripts/config.js"></script>
<script>
  // Анимация появления заголовка
  document.querySelector('.page-title')?.classList.add('fade-in');

  document.addEventListener('DOMContentLoaded', async () => {
    const container = document.getElementById("categoryList");

    try {
      const res = await fetch(`${baseUrl}/Лист1`);
      const data = await res.json();

      const categories = [...new Set(data.map(p => p.категория).filter(Boolean))];

      categories.forEach(cat => {
        const card = document.createElement("div");
        card.className = "product-card";
        card.style.cursor = "pointer";
        card.innerHTML = `<h3>${cat}</h3>`;
        card.addEventListener("click", () => {
          window.location.href = `subcategory.html?category=${encodeURIComponent(cat)}`;
        });
        container.appendChild(card);
      });

    } catch (err) {
      container.innerHTML = `<p style="color:red;">Ошибка загрузки категорий.</p>`;
      console.error(err);
    }
  });
</script>
